<!--
  Additional POM dependencies for Spring Boot projects.
  Add these to your pom.xml as needed.
-->

<!-- ============================================================ -->
<!-- TSID - For application-generated IDs (Tomato/DDD patterns)   -->
<!-- ============================================================ -->
<dependency>
    <groupId>io.hypersistence</groupId>
    <artifactId>hypersistence-utils-hibernate-71</artifactId>
    <version>3.14.1</version>
</dependency>

<!-- Usage:
package {{PACKAGE}}.shared;

import io.hypersistence.tsid.TSID;

public class TSIDUtil {
    private TSIDUtil() {}

    public static String generateTsidString() {
        return TSID.Factory.getTsid().toString();
    }

    public static Long generateTsidLong() {
        return TSID.Factory.getTsid().toLong();
    }
}
-->


<!-- ============================================================ -->
<!-- Spring Modulith - For Modular Monolith/Tomato patterns       -->
<!-- ============================================================ -->
<dependency>
    <groupId>org.springframework.modulith</groupId>
    <artifactId>spring-modulith-starter-core</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.modulith</groupId>
    <artifactId>spring-modulith-starter-jpa</artifactId>
</dependency>

<!-- Add to dependencyManagement:
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework.modulith</groupId>
            <artifactId>spring-modulith-bom</artifactId>
            <version>2.0.1</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
-->


<!-- ============================================================ -->
<!-- ArchUnit - For DDD+Hexagonal architecture tests              -->
<!-- ============================================================ -->
<dependency>
    <groupId>com.tngtech.archunit</groupId>
    <artifactId>archunit-junit5</artifactId>
    <version>1.2.1</version>
    <scope>test</scope>
</dependency>

<!-- Usage:
@ParameterizedTest
@ValueSource(strings = {"products", "orders"})
void shouldVerifyHexagonalArchitecture(String moduleName) {
    JavaClasses classes = new ClassFileImporter()
        .importPackages("com.example.%s".formatted(moduleName));

    onionArchitecture()
        .domainModels("com.example.%s.domain..".formatted(moduleName))
        .applicationServices("com.example.%s.application..".formatted(moduleName))
        .adapter("persistence", "com.example.%s.infra.persistence..".formatted(moduleName))
        .adapter("rest", "com.example.%s.interfaces.rest..".formatted(moduleName))
        .check(classes);
}
-->


<!-- ============================================================ -->
<!-- Testcontainers - For integration tests                       -->
<!-- ============================================================ -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-testcontainers</artifactId>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.testcontainers</groupId>
    <artifactId>postgresql</artifactId>
    <scope>test</scope>
</dependency>
<!-- Or for MySQL:
<dependency>
    <groupId>org.testcontainers</groupId>
    <artifactId>mysql</artifactId>
    <scope>test</scope>
</dependency>
-->


<!-- ============================================================ -->
<!-- SpringDoc OpenAPI - For Swagger UI                           -->
<!-- ============================================================ -->
<dependency>
    <groupId>org.springdoc</groupId>
    <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
    <version>3.0.0</version>
</dependency>

<!-- Access at: http://localhost:8080/swagger-ui.html -->


<!-- ============================================================ -->
<!-- Spring Boot 4 Features & Improvements                       -->
<!-- ============================================================ -->

<!--
MANDATORY VERSIONS:
- Java: 25
- Spring Boot: 4.0.x (latest stable)

Spring Boot 4 includes these features natively - no additional dependencies needed:

1. TestRestClient - Modern REST testing API
   - Already in spring-boot-starter-webmvc-test
   - Template: testrestclient-test.java
   - Usage:
     RestTestClient client = RestTestClient.bindToApplicationContext(context)
         .apiVersionInserter(ApiVersionInserter.useHeader("API-Version"))
         .build();

2. Native Resiliency Features - Built-in fault tolerance
   - Already in spring-boot-starter
   - No Resilience4j dependency needed!
   - Template: resilience-service.java
   - Annotations: @Retryable, @CircuitBreaker, @ConcurrencyLimit
   - Configuration in application.yml:
     spring:
       resilience:
         retry:
           enabled: true
         circuit-breaker:
           enabled: true

3. HTTP Service Client Simplification
   - Already in spring-boot-starter-webmvc
   - Template: http-service-client.java
   - Usage:
     @HttpExchange
     interface MyClient { @GetExchange(...) }

     @Configuration
     @ImportHttpServices(MyClient.class)
     class Config { }

4. API Versioning
   - Already in spring-boot-starter-webmvc
   - Template: api-versioning-config.java
   - Configure in WebMvcConfigurer:
     configurer.addSupportedVersions("1.0", "2.0")
              .setDefaultVersion("1.0")
              .useRequestHeader("API-Version");

5. Spring Data AOT - Native image support
   - Enable in pom.xml:
     <plugin>
       <groupId>org.springframework.boot</groupId>
       <artifactId>spring-boot-maven-plugin</artifactId>
       <executions>
         <execution>
           <id>process-aot</id>
           <goals><goal>process-aot</goal></goals>
         </execution>
       </executions>
     </plugin>

6. jSpecify NullSafety - Compile-time null checking
   - Already included in Spring Boot 4
   - Template: package-info-jspecify.java
   - Usage: Add @NullMarked to package-info.java
   - IDE configuration needed for warnings

Resources:
- Template files in assets/ directory
- https://github.com/sivaprasadreddy/spring-boot-4-features
- https://github.com/sivaprasadreddy/spring-modular-monolith
-->


<!-- ============================================================ -->
<!-- Spring Boot 4 AOT Configuration (for Native Images)         -->
<!-- ============================================================ -->
<!--
Add this to enable ahead-of-time compilation:

<build>
    <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>process-aot</id>
                    <goals>
                        <goal>process-aot</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
-->


<!-- ============================================================ -->
<!-- JSpecify Dependency (Optional - for additional tooling)     -->
<!-- ============================================================ -->
<!--
JSpecify is included by default in Spring Boot 4.
Add this only if you need explicit version control:

<dependency>
    <groupId>org.jspecify</groupId>
    <artifactId>jspecify</artifactId>
    <version>1.0.0</version>
    <scope>provided</scope>
</dependency>

Usage:
1. Create package-info.java in each package
2. Add @NullMarked annotation
3. Configure IDE for null safety warnings
4. Use @Nullable for optional fields

See template: package-info-jspecify.java
-->
